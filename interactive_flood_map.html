<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_fa3133b6c61bac460341e3f5573a11ac {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    <script src="https://cdn.jsdelivr.net/gh/ardhi/Leaflet.MousePosition/src/L.Control.MousePosition.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ardhi/Leaflet.MousePosition/src/L.Control.MousePosition.min.css"/>
</head>
<body>
    
    
         <div style="position: fixed; top: 10px; left: 50px; width: 300px; z-index:9999; background-color:white; padding: 10px; border-radius: 5px; border:2px solid grey;">
         <h3 style="font-size:16px"><b>Interactive Flood and Road Closure Map</b></h3>
         <p style="font-size:12px">Last updated: 2025-04-04 23:03:13</p>
         <p style="font-size:12px"><b>Click anywhere on the map</b> to see flood data and road closures within a 50-mile radius.</p>
         <p style="font-size:12px">Using 100% free data sources.</p>
         </div>
         
    
    <form id="coord_form" method="GET" style="display:none;">
        <input type="hidden" id="lat_input" name="lat" value="37.7749">
        <input type="hidden" id="lon_input" name="lon" value="-122.4194">
        <input type="hidden" name="radius" value="50">
        <input type="hidden" name="show_data" value="true">
        <input type="submit" value="Update">
    </form>
    
    
            <div style="position: fixed; bottom: 20px; left: 50px; width: 250px; z-index:9999; background-color:white; padding: 10px; border-radius: 5px; border:2px solid grey;">
                <h4 style="font-size:14px"><b>Data Summary</b></h4>
                <p style="font-size:12px"><b>Flood Monitoring Points:</b> 10</p>
                <p style="font-size:12px"><b>Road Closures/Issues:</b> 8</p>
                <p style="font-size:12px"><b>High Flood Level Areas:</b> 1</p>
                <p style="font-size:12px"><b>Closed Roads:</b> 2</p>
                <p style="font-size:10px"><i>Data includes a mix of real USGS data (when available) and sample data for demonstration.</i></p>
            </div>
            
    
    <div style="position: fixed; 
                bottom: 20px; right: 20px; width: 180px; height: 120px; 
                border:2px solid grey; z-index:9999; font-size:12px;
                background-color:white; padding: 10px;
                border-radius: 5px;">
                
    <b>Flood Levels</b><br>
    <i class="fa fa-circle" style="color:red"></i> High<br>
    <i class="fa fa-circle" style="color:orange"></i> Medium<br>
    <i class="fa fa-circle" style="color:blue"></i> Low<br>
    <br>
    <b>Road Status</b><br>
    <i class="fa fa-ban" style="color:red"></i> Closed<br>
    <i class="fa fa-exclamation-triangle" style="color:orange"></i> Restricted<br>
    </div>
    
    
    <div style="position: fixed; 
                top: 130px; left: 50px; width: 250px; 
                border:1px solid grey; z-index:9998; font-size:10px;
                background-color:white; padding: 5px;
                border-radius: 5px;">
    <b>Data Sources:</b><br>
    - USGS Water Services API (when available)<br>
    - Sample data for demonstration purposes
    </div>
    
    
            <div class="folium-map" id="map_fa3133b6c61bac460341e3f5573a11ac" ></div>
        
</body>
<script>

    function updateMapOnClick(e) {
        // Get the clicked coordinates
        var lat = e.latlng.lat.toFixed(6);
        var lng = e.latlng.lng.toFixed(6);
        
        // Show loading indicator
        var loadingDiv = document.createElement('div');
        loadingDiv.id = 'loading';
        loadingDiv.innerHTML = '<div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 0 10px rgba(0,0,0,0.3); z-index: 10000;"><b>Loading data...</b></div>';
        document.body.appendChild(loadingDiv);
        
        // Update the form and submit it
        document.getElementById('lat_input').value = lat;
        document.getElementById('lon_input').value = lng;
        document.getElementById('coord_form').submit();
    }
    
    // Add click event listener to the map
    map.on('click', updateMapOnClick);
    </script>
</script>
</html>